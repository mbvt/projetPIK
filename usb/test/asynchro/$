# include <unistd.h>                                                            
# include <stdlib.h>                                                            
# include <stdio.h>                                                             
# include <errno.h>                                                             
# include <inttypes.h>                                                          
# include <libusb-1.0/libusb.h>                                                 
# include <time.h>                                                              
# include <pthread.h>                                                           
# include <string.h> 

uint16_t convert_chart_to_uint(char *ptr)
{
  uint16_t key = 0x00;
  int cmp;
  int delta = 0;
  printf("-------------------\n");
  if(*ptr <= 57)
    {
      cmp = 48;   // '0' to '9' int ascii
      printf("1er \n");
      while( cmp < *ptr)
      {
        key ++;
        cmp ++;
      }
      delta = cmp - 48;
    }
    else
    {
      cmp  = 65;  // 'A' to 'F' int ascii 
      key = 0x0A;
      printf("2eme \n");
      while( cmp < *ptr)
      {   
        key ++;
        cmp ++;
      }
      delta = cmp - 48;
    }
    printf("    key = 0x%02x \n", key);
    printf ( "cmp = %d \n", cmp);
    printf(" delta = %d \n", delta);
    return key;
}
int main(void)
{
/*
  int i = 0;
  uint16_t res = 0x00;
        char *ptr;
        char array[3] = "6F";
        ptr = array;
        uint16_t result = 0x00;
  while( i < 2)
    {
        result = result + convert_chart_to_uint(ptr);
        printf(" result key =  0x%02x \n", result);
        if(i == 0)
        {
          result = result * 0x10;
        }
        printf("    key in = 0x%02x \n", result);
        i++;
        ptr++;
    }
        printf("    key out = 0x%02x \n", result);
  //_________________________________________________
*/
  uint16_t resu = 0x87;
  uint16_t save = 0x00;
  uint8_t bob = 0x00;
  char array_rep [4] = {'0', 'x'};
  char array_comp [16] =
  {'0', '1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
  int i = 0;
  int j = 0;
  uint16_t cmp = 0x00;
  
  save = resu / 0x10;
 // dernier bit 
  while (save != resu)
  {
    i++;
    save = save + 0x01;
  }
  printf("i = %d, " i);
  printf("save = 0x%02x \n" save);
  array_rep[3] = array_comp[i];
  
  // avant dernier bit 
  i = 0;
  save = resu / 0x10;
  while (cmp != save)
  {
    cmp ++;
    i ++;
  }
  printf("i = %d, " i);
  printf("cmp = 0x%02x \n" cmp);
  
  array_rep[2] = array_comp[i];
  
  printf("array_rep = '%s' \n", array_rep);
  
  return 0;    

}    
